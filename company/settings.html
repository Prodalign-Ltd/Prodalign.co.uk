<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Company Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --bg: #071826;
      --bg-2:#0b2235;
      --panel: rgba(255,255,255,0.06);
      --panel-2: rgba(255,255,255,0.04);
      --border: rgba(255,255,255,0.10);
      --border-strong: rgba(245,124,0,0.35);
      --text: #ffffff;
      --muted: rgba(255,255,255,0.78);

      --blue: #0b1d2a;
      --orange: #f57c00;
      --red: #d32f2f;

      --radius: 14px;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: radial-gradient(1200px 700px at 20% -10%, rgba(245,124,0,0.18), transparent 60%),
                  radial-gradient(900px 600px at 120% 0%, rgba(211,47,47,0.12), transparent 55%),
                  linear-gradient(180deg, var(--bg) 0%, #06131e 100%);
      color: var(--text);
      min-height: 100vh;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px;
      background: linear-gradient(90deg, rgba(16,44,68,0.95), rgba(9,27,42,0.92));
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(10px);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 0;
    }

    .brand img {
      height: 44px;
      max-width: 220px;
      object-fit: contain;
      border-radius: 10px;
      background: rgba(255,255,255,0.06);
      padding: 6px;
      display: none;
      border: 1px solid rgba(245,124,0,0.20);
    }

    .brand .name {
      font-weight: 900;
      font-size: 1.05rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 56vw;
      letter-spacing: 0.2px;
    }

    .actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    button {
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 12px;
      padding: 10px 12px;
      background: rgba(255,255,255,0.08);
      color: #fff;
      cursor: pointer;
      font-weight: 800;
      transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
    }
    button:hover {
      background: rgba(255,255,255,0.12);
      border-color: rgba(245,124,0,0.35);
      transform: translateY(-1px);
    }
    button:disabled{
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    .btn-primary{
      border-color: rgba(245,124,0,0.45);
      background: linear-gradient(180deg, rgba(245,124,0,0.22), rgba(245,124,0,0.10));
    }
    .btn-danger{
      border-color: rgba(211,47,47,0.40);
      background: linear-gradient(180deg, rgba(211,47,47,0.18), rgba(255,255,255,0.08));
    }

    .dashboard {
      height: calc(100vh - 73px);
      padding: 14px;
      display: grid;
      grid-template-columns: 380px 1fr;
      gap: 14px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
    }
    
    .panel-header{
      padding: 10px 12px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.05), transparent);
    }

    .panel-title{
      font-weight: 900;
      font-size: 0.92rem;
      letter-spacing: 0.2px;
      opacity: 0.95;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-title .dot{
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--orange);
  box-shadow: 0 0 0 4px rgba(245,124,0,0.15);
  display: inline-block;
}

/* ✅ Tree toggle styles */
    /* ===== TREE HEADER GRID (locks toggle right) ===== */
.treeHeader{
  display: grid;
  grid-template-columns: auto 1fr auto; /* dot | title | toggle */
  align-items: center;
  gap: 10px;
  width: 100%;
}

.treeHeaderTitle{
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.treeToggle{
  display: inline-flex;
  gap: 6px;
  padding: 4px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.18);
}

.treeTab{
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.06);
  font-weight: 900;
  cursor: pointer;
  transform: none !important;
}

.treeTab:hover{
  border-color: rgba(245,124,0,0.35);
  background: rgba(255,255,255,0.10);
}

.treeTab.active{
  border-color: rgba(245,124,0,0.55);
  background: linear-gradient(180deg, rgba(245,124,0,0.20), rgba(245,124,0,0.08));
}
    
    .panel-body{ padding: 12px; }

    .sidebar {
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 14px;
      min-height: 0;
    }

    .findbox .panel-body{ padding: 10px 12px 12px; }

    .field-label{
      font-weight: 900;
      font-size: 0.9rem;
      margin: 2px 0 8px;
      opacity: 0.95;
    }

    input[type="search"]{
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      outline: none;
    }
    input[type="search"]:focus{
      border-color: rgba(245,124,0,0.55);
      box-shadow: 0 0 0 4px rgba(245,124,0,0.12);
    }

    .tree {
      min-height: 0;
      display: grid;
      grid-template-rows: auto 1fr;
    }
    .tree .panel-body{
  padding: 10px 10px 12px;
  overflow: auto;
  overflow-x: hidden;
}
    
    .tree-item{
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.04);
      margin-bottom: 10px;

      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;

      user-select:none;
    }
    .tree-item:hover{
      border-color: rgba(245,124,0,0.28);
      background: rgba(255,255,255,0.06);
    }
    .tree-item .left{
  min-width: 0;   /* ✅ required for ellipsis */
  cursor: pointer;
  flex: 1;
}
    .tree-item strong{ display:block; font-size: 0.92rem; }
    .tree-item .muted{
  opacity: 0.75;
  font-size: 0.86rem;
  margin-top: 6px;

  /* ✅ one-line ellipsis */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* ✅ important inside flex layouts */
  min-width: 0;
}

    .tree-item .del{
      border: 1px solid rgba(211,47,47,0.45);
      background: rgba(211,47,47,0.12);
      padding: 8px 10px;
      border-radius: 10px;
      font-weight: 950;
      cursor: pointer;
      line-height: 1;
      flex: 0 0 auto;
    }
    .tree-item .del:hover{
      background: rgba(211,47,47,0.20);
      border-color: rgba(211,47,47,0.65);
      transform:none;
    }

    .order-ready {
      border-style: dashed;
      border-width: 2px;
      border-color: rgba(211,47,47,0.45);
      background: radial-gradient(700px 250px at 50% 0%, rgba(211,47,47,0.14), transparent 60%),
                  rgba(255,255,255,0.04);
    }
    .order-ready .panel-body{
      text-align: center;
      padding: 14px 12px 16px;
    }
    .order-ready .hint{
      margin-top: 6px;
      color: var(--muted);
      font-size: 0.86rem;
      line-height: 1.35;
    }

    .main {
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 14px;
      min-height: 0;
    }

    .topbar {
      padding: 10px 12px;
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .topbar .center-dot{
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(255,255,255,0.40);
      opacity: 0.8;
    }

    ..mainTop{
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.mainTop > .containsRow{
  flex: 1;
  min-height: 0;
}

    .containsRow{
  display: grid;
  grid-template-columns: 110px 1fr 1fr;
  gap: 10px;
  padding: 10px;

  height: 100%;
  min-height: 0;
  align-items: stretch;
}
    .idCard{
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.18);
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;

  height: 100%;
  min-height: 0;
}
    .idCard .id{
      font-weight: 950;
      letter-spacing: 0.3px;
    }
    .idCard .badge{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.82rem;
      color: var(--muted);
    }
    .idCard .badge::before{
      content:"";
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--orange);
      box-shadow: 0 0 0 4px rgba(245,124,0,0.12);
    }

    .miniPanel{
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.04);
  overflow: hidden;
  display: flex;
  flex-direction: column;

  height: 100%;
  min-height: 0;
}
    .miniPanel .miniHeader{
      padding: 10px 10px 8px;
      font-weight: 950;
      font-size: 0.9rem;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      background: linear-gradient(180deg, rgba(245,124,0,0.10), transparent);
    }
    .miniPanel .miniBody{
  padding: 10px;
  color: var(--muted);
  font-size: 0.9rem;
  line-height: 1.35;
  overflow-y: auto;   
  overflow-x: hidden; 
  flex: 1;
  min-height: 0;      
  align-items: flex-start;
}

    .details {
      min-height: 0;
      display: grid;
      grid-template-rows: auto 1fr;
    }
    .details .panel-body{
      min-height: 0;
      overflow: auto;
    }
    .detailsGrid{
  display: grid;
  grid-template-columns: minmax(420px, 720px) 1fr; 
  gap: 14px;
  align-items: start;
}
    .card {
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.04);
      padding: 12px;
    }
    .kv{
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      color: var(--muted);
      font-size: 0.92rem;
    }
    .kv b{ color: #fff; }

    .emptyHint{
      height: 100%;
      border-radius: 12px;
      border: 1px dashed rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.14);
      display: grid;
      place-items: center;
      padding: 20px;
      color: rgba(255,255,255,0.65);
      font-weight: 800;
      text-align: center;
    }
/* ===== ITEM DATA CARD (cleaner) ===== */
.itemCard{
  padding: 14px;
  width: 100%;          
  min-width: 420px;
  max-width: 720px;    
  overflow: hidden;     
}
.itemMetaGrid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px 14px;
}

.metaRow{
  display: grid;
  gap: 4px;
  min-width: 0;
}

.metaRowFull{
  grid-column: 1 / -1;
}

.itemCard .k{
  font-size: 0.75rem;
  letter-spacing: 0.3px;
  text-transform: uppercase;
  color: rgba(255,255,255,0.62);
  font-weight: 900;
}

.itemCard .v{
  font-weight: 900;
  color: rgba(255,255,255,0.92);

  /* allow wrapping when card hits max width */
  white-space: normal;
  word-break: break-word;
}
    
.itemCard #detailEtc{
  white-space: normal !important;
  overflow: visible !important;
  text-overflow: unset !important;
  word-break: break-word;
  line-height: 1.35;
  color: rgba(255,255,255,0.80);
  font-weight: 800;
}

.itemDivider{
  height: 1px;
  margin: 14px 0 12px;
  background: rgba(255,255,255,0.08);
}

.auditGrid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.auditCard{
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.16);
  border-radius: 12px;
  padding: 10px 10px;
}

.auditLabel{
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: rgba(255,255,255,0.60);
  font-weight: 900;
  margin-bottom: 6px;
}

.auditValue{
  font-weight: 950;
  color: rgba(255,255,255,0.92);

  /* allow long emails/ids to wrap and grow the card */
  white-space: normal;
  overflow: visible;
  text-overflow: unset;
  word-break: break-word;
}
.auditSub{
  margin-top: 4px;
  font-weight: 800;
  color: rgba(255,255,255,0.68);
  font-size: 0.88rem;
}
   /* ===== TABLES (contains items / ops) ===== */
.containsTable{
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}

/* Drag reorder rows */
.containsRowDraggable { cursor: grab; }
.containsRowDraggable.dragging { opacity: 0.35; }
.containsRowDraggable.dragOver { outline: 2px dashed rgba(245,124,0,0.7); }
    
.containsTable th,
.containsTable td{
      padding: 8px 8px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      vertical-align: middle;
    }
    .containsTable th{
      text-align: left;
      color: rgba(255,255,255,0.75);
      font-weight: 950;
      font-size: 0.78rem;
      letter-spacing: 0.2px;
    }
    .containsCode{
      font-weight: 950;
      color: #fff;
    }
    .qtyInput{
      width: 86px;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color: #fff;
      outline: none;
    }
    .qtyInput:focus{
      border-color: rgba(245,124,0,0.6);
      box-shadow: 0 0 0 3px rgba(245,124,0,0.12);
    }
    .rowBtn{
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      padding: 8px 10px;
      border-radius: 10px;
      font-weight: 900;
      cursor: pointer;
    }
    .rowBtn:hover{
      border-color: rgba(211,47,47,0.45);
      background: rgba(211,47,47,0.12);
      transform:none;
    }
    
/* ===== ORDER READY DROPZONE ACTIVE ===== */
#dropzone.drop-active{
  border-color: rgba(245,124,0,0.75) !important;
  box-shadow: 0 0 0 4px rgba(245,124,0,0.14);
}
    /* ===== MODAL SYSTEM ===== */
    .modal {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(6px);
      opacity: 0;
      pointer-events: none;
      transition: opacity 160ms ease;
      z-index: 50;
    }
    .modal.open { opacity: 1; pointer-events: auto; }

    .modal-card {
      width: 440px;
      max-width: 92vw;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
      background: linear-gradient(180deg, rgba(11,29,42,0.98), rgba(6,19,30,0.98));
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      animation: modalPop 160ms ease;
    }
    @keyframes modalPop {
      from { transform: scale(.96); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }

    .modal-title { font-weight: 900; }

    .modal-close {
      background: transparent;
      border: none;
      font-size: 18px;
      cursor: pointer;
      opacity: 0.7;
      padding: 6px 10px;
      color: #fff;
    }
    .modal-close:hover { opacity: 1; }

    .modal-body {
      padding: 16px;
      display: grid;
      gap: 14px;
    }

    .form-group { display: grid; gap: 6px; }
    .form-group label {
      font-weight: 800;
      font-size: 0.85rem;
      opacity: 0.9;
    }
    .form-group input,
    .form-group select {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.3);
      color: white;
    }
    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: rgba(245,124,0,0.7);
      box-shadow: 0 0 0 3px rgba(245,124,0,0.15);
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 10px;
      padding: 14px 16px;
      border-top: 1px solid rgba(255,255,255,0.08);
    }

    .modal-status{
      margin-right: auto;
      font-weight: 800;
      font-size: 0.9rem;
      color: rgba(255,255,255,0.75);
      min-height: 1.2em;
    }

    @media (max-width: 980px) {
      .dashboard{
        grid-template-columns: 1fr;
        height: auto;
      }
      .detailsGrid{ grid-template-columns: 1fr; }
      .containsRow{ grid-template-columns: 1fr; }
      .brand .name{ max-width: 48vw; }
    }
  </style>
</head>

<body>
<header>
  <div class="brand">
    <img id="companyLogo" alt="Company Logo" />
    <div class="name" id="companyName">Loading...</div>
  </div>

  <div class="actions">
    <button id="addMemberBtn" class="btn-primary" type="button">Add member</button>
    <button id="backBtn" type="button">Back</button>
    <button id="logoutBtn" class="btn-danger" type="button">Log out</button>
  </div>
</header>

<div class="dashboard">
  <!-- LEFT -->
  <div class="sidebar">
    <div class="panel findbox">
      <div class="panel-body">
        <div class="field-label">Find</div>
        <input id="findInput" type="search" placeholder="Search parts / orders / ops…" />
      </div>
    </div>

    <div class="panel tree">
  <div class="panel-header">
    <div class="treeHeader">
      <span class="dot"></span>

      <span id="treeTitle" class="treeHeaderTitle">Tree of Items</span>

      <div class="treeToggle" role="tablist" aria-label="Tree toggle">
        <button id="toggleTreeItems" type="button" class="treeTab active" role="tab" aria-selected="true">Items</button>
        <button id="toggleTreeOps" type="button" class="treeTab" role="tab" aria-selected="false">Operations</button>
      </div>
    </div>
  </div>

  <div class="panel-body">
    <div id="treeList"></div>
  </div>
</div>

    <div class="panel order-ready" id="dropzone">
      <div class="panel-body">
        <div class="panel-title" style="justify-content:center;">
          <span class="dot" style="background:var(--red); box-shadow:0 0 0 4px rgba(211,47,47,0.12)"></span>
          Order Ready?
        </div>
        <div class="hint">
          (Drag &amp; drop items; opens pop-up to fill quantity, order number, etc.)
        </div>
      </div>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="main">
    <div class="topbar">
      <button id="newItemBtn" class="btn-primary" type="button">New Item</button>
      <div class="center-dot" aria-hidden="true"></div>
      <div style="display:flex; gap:10px; align-items:center; color:var(--muted); font-weight:800;">
        <span style="opacity:.9;">Company Workspace</span>
      </div>
    </div>

    <div class="panel mainTop">
      <div class="containsRow">
        <div class="idCard">
          <div class="id" id="activeItemId">—</div>
          <div class="badge">Active</div>
        </div>

        <div class="miniPanel">
          <div class="miniHeader">Contains Items:</div>
          <div class="miniBody" id="containsItems"></div>
        </div>

        <div class="miniPanel">
          <div class="miniHeader">
  Contains Operations:
  <div style="font-weight:700;font-size:.75rem;opacity:.7;margin-top:2px;">
    Drag operations into the order required (top = first operation)
  </div>
</div>
          <div class="miniBody" id="containsOps"></div>
        </div>
      </div>
    </div>

    <div class="panel details" id="mainArea">
      <div class="panel-header">
  <div class="panel-title"><span class="dot"></span> Item Data</div>

  <!-- NEW ACTION BUTTONS -->
  <div style="display:flex; gap:10px;">
    <button id="editActiveItemBtn" type="button">Edit</button>
    <button id="deleteActiveItemBtn" class="btn-danger" type="button">Delete</button>
  </div>
</div>
      <div class="panel-body">
       <div class="detailsGrid">

  <div class="card itemCard" id="leftItemCard">
    <div class="itemMetaGrid">
      <div class="metaRow">
        <div class="k">Item</div>
        <div class="v" id="detailItem">—</div>
      </div>

      <div class="metaRow">
        <div class="k">Type</div>
        <div class="v" id="detailType">—</div>
      </div>

      <div class="metaRow">
        <div class="k">Item Cost</div>
        <div class="v" id="detailCost">—</div>
      </div>

      <div class="metaRow">
        <div class="k">Operation Time</div>
        <div class="v" id="detailTime">—</div>
      </div>

      <div class="metaRow metaRowFull">
        <div class="k">Description</div>
        <div class="v" id="detailEtc">—</div>
      </div>
    </div>

    <div class="itemDivider"></div>

    <div class="auditGrid">
      <div class="auditCard">
        <div class="auditLabel">Created</div>
        <div class="auditValue" id="detailCreatedBy">—</div>
        <div class="auditSub" id="detailCreatedDate">—</div>
      </div>

      <div class="auditCard">
        <div class="auditLabel">Last edited</div>
        <div class="auditValue" id="detailUpdatedBy">—</div>
        <div class="auditSub" id="detailUpdatedDate">—</div>
      </div>
    </div>
  </div>

  <div class="emptyHint" id="detailPanel">
  Click an item in the Tree to view it here.<br/>
  Use “New Item” to create an item.
</div>

</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ✅ Add Member Modal -->
<div id="addMemberModal" class="modal" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="addMemberTitle">
    <div class="modal-header">
      <div class="modal-title" id="addMemberTitle">Add member</div>
      <button class="modal-close" id="closeAddMemberModal" type="button">✕</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label for="memberEmail">Email</label>
        <input id="memberEmail" type="email" placeholder="name@company.com" autocomplete="email" />
      </div>

      <div class="form-group">
        <label for="memberRole">Role</label>
        <select id="memberRole">
          <option value="member" selected>Member</option>
          <option value="admin">Admin</option>
        </select>
      </div>

      <div style="color: rgba(255,255,255,0.72); font-weight: 800; font-size: 0.9rem; line-height: 1.35;">
        This calls a Firebase Cloud Function named <b>createCompanyMember</b>.
      </div>
    </div>

    <div class="modal-footer">
      <div class="modal-status" id="addMemberStatus"></div>
      <button id="cancelAddMember" type="button">Cancel</button>
      <button class="btn-primary" id="createMemberBtn" type="button">Create member</button>
    </div>
  </div>
</div>

<!-- ✅ New Item Modal -->
<div id="newItemModal" class="modal" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="newItemTitle">
    <div class="modal-header">
      <div class="modal-title" id="newItemTitle">Create New Item</div>
      <button class="modal-close" id="closeNewItemModal" type="button">✕</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label for="newItemCode">Item Code</label>
        <input type="text" id="newItemCode" placeholder="e.g. P40000" autocomplete="off">
      </div>

      <div class="form-group">
        <label for="newItemType">Item Type</label>
        <select id="newItemType">
          <option value="raw_material">Raw material</option>
          <option value="bought_out">Bought out item</option>
          <option value="final_saleable" selected>Final Saleable</option>
          <option value="operation">Operation</option>
        </select>
      </div>

      <div class="form-group">
        <label for="newItemDescription">Description</label>
        <input type="text" id="newItemDescription" placeholder="Item description" autocomplete="off">
      </div>

      <div class="form-group">
        <label for="newItemCost">Base Cost</label>
        <input type="number" id="newItemCost" placeholder="0.00" inputmode="decimal">
      </div>
    </div>

    <div class="modal-footer">
      <div class="modal-status" id="newItemStatus"></div>
      <button id="cancelNewItem" type="button">Cancel</button>
      <button class="btn-primary" id="saveNewItem" type="button">Create Item</button>
    </div>
  </div>
</div>

<!-- ✅ Delete Confirm Modal -->
<div id="deleteItemModal" class="modal" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="deleteItemTitle">
    <div class="modal-header">
      <div class="modal-title" id="deleteItemTitle">Delete item</div>
      <button class="modal-close" id="closeDeleteItemModal" type="button">✕</button>
    </div>

    <div class="modal-body">
      <div style="font-weight:900; line-height:1.35;">
        This will permanently delete:
        <span id="deleteItemName" style="color:var(--orange);"></span>
      </div>

      <div style="color: rgba(255,255,255,0.72); font-weight:800; line-height:1.35;">
        Type <b>DELETE</b> to confirm.
      </div>

      <div class="form-group">
        <label for="deleteConfirmText">Confirmation</label>
        <input id="deleteConfirmText" type="text" placeholder="Type DELETE" autocomplete="off" />
      </div>
    </div>

    <div class="modal-footer">
      <div class="modal-status" id="deleteStatus"></div>
      <button id="cancelDeleteItem" type="button">Cancel</button>
      <button class="btn-danger" id="confirmDeleteItem" type="button" disabled>Delete</button>
    </div>
  </div>
</div>

<!-- ✅ Edit Item Modal -->
<div id="editItemModal" class="modal" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="editItemTitle">
    <div class="modal-header">
      <div class="modal-title" id="editItemTitle">Edit Item</div>
      <button class="modal-close" id="closeEditItemModal" type="button">✕</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label>Item Code</label>
        <input type="text" id="editItemCode" disabled />
      </div>

      <div class="form-group">
        <label>Description</label>
        <input type="text" id="editItemDescription" />
      </div>

      <div class="form-group">
        <label>Base Cost</label>
        <input type="number" id="editItemCost" />
      </div>
    </div>

    <div class="modal-footer">
      <div class="modal-status" id="editItemStatus"></div>
      <button id="cancelEditItem" type="button">Cancel</button>
      <button class="btn-primary" id="saveEditItem" type="button">Save Changes</button>
    </div>
  </div>
</div>
  <!-- ✅ Order Ready Modal -->
<div id="orderReadyModal" class="modal" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="orderReadyTitle">
    <div class="modal-header">
      <div class="modal-title" id="orderReadyTitle">Send to Operators</div>
      <button class="modal-close" id="closeOrderReadyModal" type="button">✕</button>
    </div>

    <div class="modal-body">
      <div style="font-weight:900; line-height:1.35;">
        Item: <span id="orderReadyItem" style="color:var(--orange);"></span>
      </div>

      <div class="form-group">
        <label for="orderReadyOrderNo">Order number</label>
        <input id="orderReadyOrderNo" type="text" placeholder="e.g. SO-100245" autocomplete="off" />
      </div>

      <div class="form-group">
        <label for="orderReadyQty">Quantity</label>
        <input id="orderReadyQty" type="number" min="1" step="1" value="1" />
      </div>

      <div style="color: rgba(255,255,255,0.72); font-weight: 800; font-size: 0.9rem; line-height: 1.35;">
        Confirming will send this job to the operator dashboard.
      </div>
    </div>

    <div class="modal-footer">
      <div class="modal-status" id="orderReadyStatus"></div>
      <button id="cancelOrderReady" type="button">Cancel</button>
      <button class="btn-primary" id="confirmOrderReady" type="button">Send</button>
    </div>
  </div>
</div>
  
<script type="module" src="./js/dashboard.js"></script>
  
</body>
</html>
